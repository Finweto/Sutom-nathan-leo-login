<link rel="stylesheet" type="text/css" href="/css/style.css" />

<html>
Bonjour vous Ãªtes dans le login</br>
Entrez votre Name et votre mot de Passe
<form id="login-form" action='post'>
    <input id="inputName" type="text" name="clientName">
    <input id="inputPassword" type="password" name="clientPassword">
    <input type="submit" value="Submit Name">
</form>

</html>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>

<script type="module">
    document.getElementById("login-form").addEventListener("submit", function (event) {
        // prevent change of page on submit 
        event.preventDefault()


        // get client input
        const nameInput = event.target[0].value
        const passwordInput = event.target[1].value


        // set localStorage item
        localStorage.setItem('name', nameInput)

        // set anti cheat
        localStorage.setItem('previousWord', '')

        // set score obj
        localStorage.setItem('scores', JSON.stringify([]))


        // set Tries
        localStorage.setItem("avgTry", 0);
        localStorage.setItem("nbTry", 0);

        // show wrong name or password or redirect with code
        $.post('/verifyLogin', { name: nameInput, password: passwordInput }, (data) => {
            if (data) {
                document.location = `/redirect?code=${data}`
            }
            else {
                alert('mauvais Name ou Mot de passe')
            }
        })

    })
</script>